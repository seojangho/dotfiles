# oh-my-zsh settings
DISABLE_AUTO_UPDATE=true

# bullet-train
export BULLETTRAIN_PROMPT_ROOT=false
export BULLETTRAIN_PROMPT_CHAR="âžœ"
export BULLETTRAIN_PROMPT_ADD_NEWLINE=false
export BULLETTRAIN_STATUS_EXIT_SHOW=true
export BULLETTRAIN_STATUS_BG='red'
export BULLETTRAIN_TIME_SHOW=false
export BULLETTRAIN_CONTEXT_SHOW=false
export BULLETTRAIN_DIR_EXTENDED=2
export BULLETTRAIN_GO_SHOW=true
if [[ $USERNAME != 'jangho' && $USERNAME != 'janghose' ]]
then
    BULLETTRAIN_CUSTOM_MSG_USERNAME='%n'
else
    BULLETTRAIN_CUSTOM_MSG_USERNAME=''
fi
if (($+SSH_TTY))
then
    BULLETTRAIN_CUSTOM_MSG_HOSTNAME='%m'
else
    BULLETTRAIN_CUSTOM_MSG_HOSTNAME=''
fi
if [[ $BULLETTRAIN_CUSTOM_MSG_USERNAME != '' && $BULLETTRAIN_CUSTOM_MSG_HOSTNAME != '' ]]
then
    BULLETTRAIN_CUSTOM_MSG_AT='@'
else
    BULLETTRAIN_CUSTOM_MSG_AT=''
fi
if [[ $BULLETTRAIN_CUSTOM_MSG_USERNAME != '' || $BULLETTRAIN_CUSTOM_MSG_HOSTNAME != '' ]]
then
    export BULLETTRAIN_CUSTOM_MSG=$BULLETTRAIN_CUSTOM_MSG_USERNAME$BULLETTRAIN_CUSTOM_MSG_AT$BULLETTRAIN_CUSTOM_MSG_HOSTNAME
fi
if [[ $UID -eq 0 ]]
then
    export BULLETTRAIN_CUSTOM_BG='red'
fi

# zgen
source ~/.zgen.repo/zgen.zsh

if ! zgen saved; then
    zgen oh-my-zsh
    zgen oh-my-zsh plugins/git
    zgen load zsh-users/zsh-syntax-highlighting
    zgen load zsh-users/zsh-completions
    zgen load zsh-users/zsh-autosuggestions
    zgen load caiogondim/bullet-train-oh-my-zsh-theme bullet-train

    zgen save
fi

# path
PATH="$HOME/.local/bin:$(ruby -e 'print Gem.user_dir')/bin:$PATH"

# rubygem
export GEM_HOME=$(ruby -e 'print Gem.user_dir')

# zsh-autosuggest style
export ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=242'

# nvm
function nvm() {
    unset -f nvm
    export NVM_DIR="$HOME/.nvm"
    [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"  # This loads nvm
    export BULLETTRAIN_NVM_SHOW=true
}

# avoid dangers
alias mv='mv -i'
alias cp='cp -i'
alias rm='rm -i'

# taskwarrior
alias ts='task sync'
alias tv='task active'
alias t='task'
alias ta='task add'
alias s='task schedule wait.before:today+60days'
function sa() {
    task add wait:$1 schedule:$1 due:$1 ${@:2}
}
alias tw='timew'

# update
alias update='[ -f ~/.jangho-system/updateall.sh ] && ~/.jangho-system/updateall.sh; ~/.jangho/updateall.sh'

# ssh
alias mango='mosh --ssh="ssh -p 50022" jangho@mango.jangho.kr'
alias kiwi='mosh jangho@kiwi.jangho.kr'
alias martini='mosh janghose@martini.snucse.org'
alias rssh='ssh 147.46.215.152 -p1832 -ljhsuh'
alias papaya='mosh jangho@papaya.jangho.kr'
alias dev='mosh jangho@dev.snucse.org'

# open
alias open='xdg-open'

# strong pwgen
alias spwgen='pwgen -y -1 40 5'

# fzf
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# nocolor
alias nocolor=' sed -r "s/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[mGK]//g"'

# op
alias op='source ~/.jangho/apps/zsh/op'

# switch ctrl+l <=> ctrl+space
bindkey ^L forward-word
bindkey ^@ clear-screen

# host-specific settings
[ -r ~/.jangho/hosts/$(hostname)/zsh/zshrc_host ] && source ~/.jangho/hosts/$(hostname)/zsh/zshrc_host

# function that copies files to tmp.jangho.kr
function tmp() {
    rsync -avz -e "ssh -p50022" "$1" jangho@mango.jangho.kr:~/public_tmp/_/private
}

# okay to go
true
